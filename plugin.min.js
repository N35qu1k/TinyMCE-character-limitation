tinymce.PluginManager.add("charlimit",function(t){t.on("init",function(){var a=($("#"+t.id),tinyMCE.activeEditor.getParam("maxCharacters")),r=tinyMCE.activeEditor.getParam("maxDisplay"),e=tinyMCE.activeEditor.getParam("subButton"),i=tinyMCE.activeEditor.getParam("color1","black"),o=tinyMCE.activeEditor.getParam("color2","orange"),c=tinyMCE.activeEditor.getParam("color3","red"),n=function(){var r=t.getContent({format:"raw"});r=r.replace(/\.\.\./g,""),r=r.replace(/<.[^<>]*?>/g,""),r=r.replace(/&nbsp;|&#160;/gi," "),r=r.replace(/(\w+)(&#?[a-z0-9]+;)+(\w+)/i,"$1$3"),r=r.replace(/&.+?;/g,"");var e=a-r.length;return e};$(r).text(n()),t.on("keyup",function(){$(r).text(n()),maxColor=a/4,n()>maxColor&&($(r).css("color",i),$(e).removeAttr("disabled")),n()<maxColor&&($(r).css("color",o),$(e).removeAttr("disabled")),n()<0&&($(r).css("color",c),$(e).attr("disabled","disabled"))})})});
